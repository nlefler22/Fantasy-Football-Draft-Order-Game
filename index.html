<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fantasy Football Draft Race</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #1e3d1a;
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      text-align: center;
      padding: 20px;
    }
    main {
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    .collapsible {
      background-color: #0077cc;
      color: white;
      cursor: pointer;
      padding: 10px;
      width: 100%;
      border: none;
      text-align: left;
      outline: none;
      font-size: 18px;
      margin-bottom: 5px;
      border-radius: 5px;
    }
    .content {
      padding: 10px;
      display: none;
      overflow: hidden;
      background-color: #f1f1f1;
      color: #000;
      border-radius: 5px;
      margin-bottom: 10px;
    }
    #setup label, #setup input, #setup button {
      display: block;
      margin: 10px auto;
      font-size: 16px;
    }
    input[type="number"], input[type="text"] {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      width: 90%;
      max-width: 300px;
    }
    #raceField {
      position: relative;
      background-image: url("https://i.postimg.cc/pp07bCm3/Football-Field-Only.png");
      background-size: cover;
      background-position: center;
      width: 100%;
      max-width: 1000px;
      height: 500px;
      border: 4px solid white;
      margin: 20px auto;
      overflow: hidden;
    }
    #fieldLogo {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 150px;
      opacity: 0.8;
      z-index: 0;
    }
    .runner {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 60px;
      z-index: 2;
    }
    .runner img {
      width: 60px;
      animation: bobble 0.4s infinite alternate;
    }
    @keyframes bobble {
      from { transform: translateY(0); }
      to { transform: translateY(-6px); }
    }
    #buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin: 20px 0;
    }
    .action-button {
      background: none;
      border: none;
      padding: 0;
      cursor: pointer;
    }
    .action-button img {
      height: 60px;
    }
    #results {
      background-color: rgba(255,255,255,0.95);
      padding: 20px;
      border-radius: 10px;
      color: black;
      max-width: 500px;
      margin: 20px auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }
    @media (max-width: 600px) {
      .runner img { width: 40px; }
      #fieldLogo { width: 100px; }
    }
  </style>
</head>
<body>
<header>
  <h1>Fantasy Football Draft Race</h1>
</header>
<main>
  <button class="collapsible">Instructions</button>
  <div class="content">
    <p>1/ Select the number of players, 2/ Input your custom odds, 3/ Start the race. After each race, click "Next Round" to continue determining 2nd, 3rd, etc... At the end of the last round, the complete draft order will be determined.</p>
  </div>

  <button class="collapsible">Methodology</button>
  <div class="content">
    <p>The winner of each round is determined by weighted random selection based purely on the odds provided. After each round, the previous winner is removed and the selection is made again with the remaining players, based on the updated odds.</p>
  </div>

  <div id="setup">
    <label for="playerCount">Number of Players:</label>
    <input type="number" id="playerCount" min="2" max="12" value="6">
    <button onclick="generatePlayerInputs()">Set Players</button>
    <form id="playerForm"></form>
    <div id="totalOdds">Total Odds: 0%</div>
  </div>

  <div id="buttons">
    <button class="action-button" onclick="startNextRace()">
      <img src="https://i.postimg.cc/z3F6p88z/startrace2.png" alt="Start Race">
    </button>
    <button class="action-button" onclick="toggleMusic()">
      <img src="https://i.postimg.cc/xcj74h1K/Start-Stop-Music.png" alt="Start/Stop Music">
    </button>
  </div>

  <div id="raceField">
    <img id="fieldLogo" src="https://i.postimg.cc/CnSCd3QJ/ffdraftracelogo.png" alt="Field Logo">
  </div>

  <div id="results">
    <h3>Winners</h3>
    <table id="resultTable">
      <tr><th>Draft Pick</th><th>Player</th></tr>
    </table>
  </div>
</main>

<audio id="backgroundMusic" loop>
  <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-9.mp3" type="audio/mpeg">
</audio>
<audio id="whistle" src="https://www.soundjay.com/button/sounds/beep-07.mp3"></audio>
<audio id="cheer" src="https://www.soundjay.com/human/sounds/applause-8.mp3"></audio>

<script>
function toggleMusic() {
  const music = document.getElementById('backgroundMusic');
  if (music.paused) {
    music.play();
  } else {
    music.pause();
  }
}

const coll = document.getElementsByClassName("collapsible");
for (let i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    const content = this.nextElementSibling;
    content.style.display = content.style.display === "block" ? "none" : "block";
  });
}

// Include your full JavaScript logic for players, odds, weightedDraw, race logic, animateRace, etc. here.
</script>
</body>
</html>
